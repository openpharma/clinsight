<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to ClinSight • clinsight</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to ClinSight">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">clinsight</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/clinsight.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Metadata.html">Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/Deployment.html">Deployment</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Validation</h6></li>
    <li><a class="dropdown-item" href="../articles/test_report.html">Test report</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/Contributions.html">Contributions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openpharma/clinsight/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to ClinSight</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/openpharma/clinsight/blob/main/vignettes/clinsight.Rmd" class="external-link"><code>vignettes/clinsight.Rmd</code></a></small>
      <div class="d-none name"><code>clinsight.Rmd</code></div>
    </div>

    
    
<p>To get started, you can easily run and test ClinSight by using the
function <code><a href="../reference/test_clinsight.html">clinsight::test_clinsight()</a></code>. This function loads
all data in a temporary folder that will be cleaned up after use. If no
data is provided, “dummy” data will be used to run the application. Note
that this function is only meant for testing and development, and is a
wrapper around <code><a href="../reference/run_app.html">clinsight::run_app()</a></code>, the primary function
to launch the app. Executing <code><a href="../reference/run_app.html">clinsight::run_app()</a></code> directly
will create a database in the working directory that will record user
actions such as the study data’s review status. This database is
required for deployment in a production environment.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Not run:</span></span>
<span><span class="co"># If evaluated, this will run ClinSight with internal test data</span></span>
<span><span class="fu"><a href="../reference/test_clinsight.html">test_clinsight</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Once launched, the <code>Start</code> screen will look like the
following:</p>
<p><img src="images/clinsight-start_screen.png" width="556"></p>
<div class="section level2">
<h2 id="create-custom-data-and-metadata">Create custom data and metadata<a class="anchor" aria-label="anchor" href="#create-custom-data-and-metadata"></a>
</h2>
<p>In order to use custom study data with ClinSight, first the raw data
needs to be in the correct format (<a href="#raw_data_structure">see
below</a>). Secondly, a ClinSight metadata file needs to be prepared so
that the app knows how to use the raw data. (see
<code><a href="../reference/create_clinsight_metadata.html">create_clinsight_metadata()</a></code> and
<code><a href="../reference/get_metadata.html">get_metadata()</a></code>. Then, the raw data needs to be merged with
the metadata file (using merge_meta_with_data()) to create custom
<code>ClinSight</code>-compatible input data. All details about the
metadata template and how to customize it can be found in the
<code><a href="../articles/Metadata.html">vignette("Metadata")</a></code>.</p>
<div class="section level3">
<h3 id="raw_data_structure">Raw data structure<a class="anchor" aria-label="anchor" href="#raw_data_structure"></a>
</h3>
<p>Raw study data is expected to be in ‘long format’ with all columns
being of type <code>character</code>. Below is a table with the required
columns. Note that the column names shown below are flexible since they
can be customized (renamed) using the <a href="./Metadata.html#column_names">‘column_names’ tab</a> from the
metadata template as needed.</p>
<table class="table">
<colgroup>
<col width="26%">
<col width="73%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Name</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="even">
<td>site_code</td>
<td>Identifier for study site.</td>
</tr>
<tr class="odd">
<td>subject_id</td>
<td>Unique identifier for a subject</td>
</tr>
<tr class="even">
<td>event_id</td>
<td>Identifies events within a study, such as study visits.</td>
</tr>
<tr class="odd">
<td>event_date</td>
<td>The date of the event. Should be convertible from a character vector
to a valid date within R.</td>
</tr>
<tr class="even">
<td>event_repeat</td>
<td>Counter containing a sequence number that increments if an event_id
is repeated within the same subject.</td>
</tr>
<tr class="odd">
<td>form_id</td>
<td>Identifier for each form. Can be mostly ignored, since new form
identifiers are set within ClinSight metadata.</td>
</tr>
<tr class="even">
<td>form_repeat</td>
<td>Counter containing a sequence number that increments if a form is
repeated within the same subject.</td>
</tr>
<tr class="odd">
<td>var</td>
<td>Name of the variable to use in ClinSight. Longer/more appropriate
names will be specified in metadata.</td>
</tr>
<tr class="even">
<td>item_value</td>
<td>Value of the variable (<code>var</code>) in question.</td>
</tr>
<tr class="odd">
<td>edit_date_time</td>
<td>The time at which the value was last edited. Important for efficient
reviewing of the data within ClinSight.</td>
</tr>
</tbody>
</table>
<p>As an example, we will show raw data pre-installed with the package
that can be converted to <code>ClinSight</code>-compatible input
data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_raw_csv_data.html">get_raw_csv_data</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"raw_data"</span>, package <span class="op">=</span> <span class="st">"clinsight"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Adding synch time ' 2025-05-20 16:27:52 UTC ' as the attribute 'synch_time' to the data set.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 13</span></span></span>
<span><span class="co">#&gt;   SiteCode SubjectId  EventSeq EventId EventName EventDate FormId SubjectFormSeq</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> BEL08    BEL_08_885 1        COMMON… Any visit 2023-08-… AE     1             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> BEL08    BEL_08_885 1        COMMON… Any visit 2023-08-… AE     1             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> BEL08    BEL_08_885 1        COMMON… Any visit 2023-08-… AE     1             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> BEL08    BEL_08_885 1        COMMON… Any visit 2023-08-… AE     1             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> BEL08    BEL_08_885 1        COMMON… Any visit 2023-08-… AE     1             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> BEL08    BEL_08_885 1        COMMON… Any visit 2023-08-… AE     1             </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: EditDateTime &lt;chr&gt;, EventLabel &lt;chr&gt;, ItemName &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ItemValue &lt;chr&gt;, ItemId &lt;chr&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="merge-and-prepare-data">Merge and prepare data<a class="anchor" aria-label="anchor" href="#merge-and-prepare-data"></a>
</h3>
<p>When metadata in the Excel sheet is adjusted properly for
study-specific needs (see <code><a href="../articles/Metadata.html">vignette("Metadata")</a></code>), it should
be converted to an R object with the function
<code><a href="../reference/get_metadata.html">get_metadata()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_custom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata.html">get_metadata</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"metadata.xlsx"</span>, package <span class="op">=</span> <span class="st">"clinsight"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Next step in preparing data for ClinSight is merging the metadata
object with the raw data using the function
<code><a href="../reference/merge_meta_with_data.html">merge_meta_with_data()</a></code>. This will output an informative
error message if an incompatible change was made.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">merged_study_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_meta_with_data.html">merge_meta_with_data</a></span><span class="op">(</span><span class="va">raw_data</span>, <span class="va">meta_custom</span><span class="op">)</span></span>
<span><span class="co">#&gt; applying function 'identity' to the data</span></span>
<span><span class="co">#&gt; order can be derived from metadata</span></span>
<span><span class="co">#&gt; Created the following event_label and event_name combinations:</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 2</span></span></span>
<span><span class="co">#&gt;   event_label event_name</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> SCR         Screening </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> V1          Visit 1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> V2          Visit 2   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> V3          Visit 3   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> V4          Visit 4   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> V5          Visit 5   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> V6          Visit 6   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> <span style="color: #BB0000;">NA</span>          Any visit </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> <span style="color: #BB0000;">NA</span>          Exit      </span></span>
<span><span class="co">#&gt; applying function 'apply_study_specific_suffix_fixes' to the data</span></span>
<span><span class="co">#&gt; Using user supplied "suffix_names" instead of deriving.</span></span>
<span><span class="co">#&gt; applying function 'apply_edc_specific_changes' to the data</span></span>
<span><span class="co">#&gt; Using suffix '_ITEM_TO_MERGE_WITH_PAIR' to detect item pairs</span></span>
<span><span class="co">#&gt; Verifying if following items need merging with their defined pair: </span></span>
<span><span class="co">#&gt;   CM Name, CM Frequency, AE Treatment action, CM Unit, CM Route</span></span>
<span><span class="co">#&gt; merging item 'CM Name' with its matched pair</span></span>
<span><span class="co">#&gt; merging item 'CM Frequency' with its matched pair</span></span>
<span><span class="co">#&gt; merging item 'AE Treatment action' with its matched pair</span></span>
<span><span class="co">#&gt; merging item 'CM Unit' with its matched pair</span></span>
<span><span class="co">#&gt; merging item 'CM Route' with its matched pair</span></span>
<span><span class="co">#&gt; applying function 'apply_study_specific_fixes' to the data</span></span></code></pre></div>
<p>Finally, we can test launch ClinSight with our custom data and
metadata:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Not run</span></span>
<span><span class="fu"><a href="../reference/test_clinsight.html">test_clinsight</a></span><span class="op">(</span><span class="va">merged_study_data</span>, <span class="va">meta_custom</span><span class="op">)</span></span></code></pre></div>
<p>Notice that the application shows a warning if some variables defined
in the metadata are not available in the actual data, similar to the
message below. It is useful to check this output carefully to see if any
variable names were entered incorrectly.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Warning in check_appdata(app_data, meta) :</span></span>
<span><span class="co">#   Not all variables defined in metadata are present in the data.</span></span>
<span><span class="co">#              var               item_name</span></span>
<span><span class="co"># 1 AE_AESER_AEOUT             SAE outcome</span></span>
<span><span class="co"># 2     WHO_WHOCAT   WHO.subclassification</span></span>
<span><span class="co"># 3       DMOD_DAT    DoseModificationDate</span></span>
<span><span class="co"># 4      DMOD_REAS  DoseModificationReason</span></span>
<span><span class="co"># 5      DMOD_DOSE DoseModificationNewDose</span></span></code></pre></div>
<p>To iteratively improve the metadata, simply stop the application,
adjust the metadata, merge it again with the raw data, and re-launch
using <code><a href="../reference/test_clinsight.html">test_clinsight()</a></code>. For example, if we want to change
the name of ‘Systolic blood pressure’ to ‘SBP’, we can adjust this in
the Excel file, save the metadata and use <code><a href="../reference/get_metadata.html">get_metadata()</a></code>
again:</p>
<p><img src="images/metadata-change_var_name.png"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Not run</span></span>
<span><span class="va">adjusted_study_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_meta_with_data.html">merge_meta_with_data</a></span><span class="op">(</span><span class="va">raw_data</span>, <span class="va">meta_custom_adjusted</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/test_clinsight.html">test_clinsight</a></span><span class="op">(</span><span class="va">adjusted_study_data</span>, <span class="va">meta_custom</span><span class="op">)</span> </span></code></pre></div>
<p>If changed correctly, the name of the variable will change
accordingly in the application:</p>
<p><img src="images/clinsight-var_name_change.png" width="621"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Leonard Daniël Samson, GCP-Service International Ltd.&amp; Co. KG.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
