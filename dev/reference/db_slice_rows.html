<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Slice database rows — db_slice_rows • clinsight</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Slice database rows — db_slice_rows"><meta name="description" content="Selects rows in a database with the maximum value of one or more variables
within every group, and collects the resulting table in memory. Mainly
designed to be used with date-time variables, thus selecting on latest time,
but can be used with any variable for row selection."><meta property="og:description" content="Selects rows in a database with the maximum value of one or more variables
within every group, and collects the resulting table in memory. Mainly
designed to be used with date-time variables, thus selecting on latest time,
but can be used with any variable for row selection."><meta property="og:image" content="https://openpharma.github.io/clinsight/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">clinsight</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/clinsight.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Metadata.html">Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/Deployment.html">Deployment</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Validation</h6></li>
    <li><a class="dropdown-item" href="../articles/test_report.html">Test report</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/Contributions.html">Contributions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openpharma/clinsight/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Slice database rows</h1>
      <small class="dont-index">Source: <a href="https://github.com/openpharma/clinsight/blob/dev/R/fct_db_collect_data.R" class="external-link"><code>R/fct_db_collect_data.R</code></a></small>
      <div class="d-none name"><code>db_slice_rows.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Selects rows in a database with the maximum value of one or more variables
within every group, and collects the resulting table in memory. Mainly
designed to be used with date-time variables, thus selecting on latest time,
but can be used with any variable for row selection.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">db_slice_rows</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  db_table <span class="op">=</span> <span class="st">"all_review_data"</span>,</span>
<span>  slice_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"timestamp"</span>, <span class="st">"edit_date_time"</span><span class="op">)</span>,</span>
<span>  group_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"subject_id"</span>, <span class="st">"event_name"</span>, <span class="st">"item_group"</span>, <span class="st">"form_repeat"</span>, <span class="st">"item_name"</span><span class="op">)</span>,</span>
<span>  warn_duplicates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Can either be a data frame, or a character string with the file
path to the database.</p></dd>


<dt id="arg-db-table">db_table<a class="anchor" aria-label="anchor" href="#arg-db-table"></a></dt>
<dd><p>Character string. Name of the table to collect. Will only be
used if <code>data</code> is a character string to a database.</p></dd>


<dt id="arg-slice-vars">slice_vars<a class="anchor" aria-label="anchor" href="#arg-slice-vars"></a></dt>
<dd><p>Character vector. Names of the variables that will be used
to slice the data frame. Note that the order matters: Slicing will occur
for each variable in this vector successively,</p></dd>


<dt id="arg-group-vars">group_vars<a class="anchor" aria-label="anchor" href="#arg-group-vars"></a></dt>
<dd><p>Character vector. Variable names of the variables to
perform the grouping on.</p></dd>


<dt id="arg-warn-duplicates">warn_duplicates<a class="anchor" aria-label="anchor" href="#arg-warn-duplicates"></a></dt>
<dd><p>Logical. Whether to warn if duplicate rows are
detected after performing the grouping.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with the same or less amount of rows as the data frame
in the database.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Needs <code>dbplyr</code> version 2.4.0 or later, otherwise the <code>.data</code> pronoun will not
work within <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">dplyr::slice_max()</a></code> when used on a SQL database connection (see
<a href="https://github.com/tidyverse/dbplyr/issues/1294" class="external-link">this issue</a>).</p>
<p>In the application, we slice for two date-time variables to
collect active review data. The first date-time variable is the <code>timestamp</code>
added after reviewing a data point in the application. This allows
us to keep an audit trail, by keeping data of all review actions in the
database, but only selecting the latest review data each timestamp allows us
to add an audit trail of the review actions in the main database and allow
the user to update their review, while only showing the main data in the
application.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Leonard Daniël Samson, GCP-Service International Ltd.&amp; Co. KG.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

